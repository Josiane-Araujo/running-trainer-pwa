<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a1e">
    <title>Running Trainer</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Tela Menu -->
    <div id="menuScreen" class="screen active">
        <div class="container">
            <h1 class="title">Running Trainer</h1>
            <p class="subtitle">Escolha o tipo de treino</p>
            
            <!-- Seletor de Voz no Menu -->
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                <label style="display: block; color: #e0e0e0; margin-bottom: 8px; font-size: 14px;">
                    üé§ Voz do Assistente:
                </label>
                <select id="seletorVozMenu" onchange="atualizarVoz(); sincronizarSeletores();" style="width: 100%; padding: 10px; font-size: 14px; border-radius: 8px; border: none; background: white; color: #333;">
                    <option value="auto">ü§ñ Autom√°tico</option>
                    <option value="feminina">üë© Feminina (Maria)</option>
                    <option value="masculina">üë® Masculina (Daniel)</option>
                </select>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" onclick="showScreen('tempoScreen')">
                    Treino por TEMPO
                </button>
                <button class="btn btn-secondary" onclick="showScreen('distanciaScreen')">
                    Treino por DIST√ÇNCIA
                </button>
                
                <!-- Bot√£o de Teste de Voz -->
                <button class="btn" style="background: linear-gradient(135deg, #00cc66 0%, #009944 100%); font-size: 18px; padding: 15px;" onclick="testarVozManual()">
                    üé§ Testar Voz
                </button>
            </div>
        </div>
    </div>

    <!-- Tela Treino por Tempo -->
    <div id="tempoScreen" class="screen">
        <div class="container">
            <div class="header">
                <button class="btn-back" onclick="showScreen('menuScreen')">‚Üê Voltar</button>
                <h2 class="screen-title">Treino por Tempo</h2>
            </div>

            <div class="form">
                <div class="form-group">
                    <label>Tempo de CORRIDA (minutos)</label>
                    <input type="number" id="tempoCorrida" placeholder="Ex: 2" min="1">
                </div>

                <div class="form-group">
                    <label>Tempo de CAMINHADA (minutos)</label>
                    <input type="number" id="tempoCaminhada" placeholder="Ex: 1 (opcional)" min="0">
                </div>

                <div class="form-group">
                    <label>Tempo de CORRIDA 2 (minutos)</label>
                    <input type="number" id="tempoCorrida" placeholder="Ex: 2" min="1">
                </div>

                <div class="form-group">
                    <label>N√∫mero de REPETI√á√ïES</label>
                    <input type="number" id="repeticoes" placeholder="Ex: 10" min="1">
                </div>

                <button class="btn btn-success" onclick="iniciarTreinoTempo()">
                    INICIAR TREINO
                </button>
            </div>
        </div>
    </div>

    <!-- Tela Treino por Dist√¢ncia -->
    <div id="distanciaScreen" class="screen">
        <div class="container">
            <div class="header">
                <button class="btn-back" onclick="showScreen('menuScreen')">‚Üê Voltar</button>
                <h2 class="screen-title">Treino por Dist√¢ncia</h2>
            </div>

            <div class="form">
                <div class="form-group">
                    <label>Dist√¢ncia de CORRIDA (km)</label>
                    <input type="number" id="distCorrida" placeholder="Ex: 0.2 (200m) ou 2" step="0.1" min="0.1">
                </div>

                <div class="form-group">
                    <label>Dist√¢ncia de CAMINHADA (km)</label>
                    <input type="number" id="distCaminhada" placeholder="Ex: 0.1 (opcional)" step="0.1" min="0">
                </div>

                <div class="form-group">
                    <label>Dist√¢ncia de CORRIDA 2 (km)</label>
                    <input type="number" id="distCorrida" placeholder="Ex: 0.2 (200m) ou 2" step="0.1" min="0.1">
                </div>

                <div class="form-group">
                    <label>N√∫mero de REPETI√á√ïES</label>
                    <input type="number" id="repeticoesDist" placeholder="Ex: 10" min="1">
                </div>

                <p class="info-text">üìç GPS ser√° ativado durante o treino</p>

                <button class="btn btn-success" onclick="iniciarTreinoDistancia()">
                    INICIAR TREINO
                </button>
            </div>
        </div>
    </div>

    <!-- Tela de Treino -->
    <div id="treinoScreen" class="screen">
        <div class="container treino-container">
            <div class="fase-atual" id="faseAtual">Preparar</div>

            <div class="info-principal">
                <div class="info-box">
                    <div class="info-label" id="infoLabel">Tempo Restante</div>
                    <div class="info-valor" id="infoValor">00:00</div>
                </div>

                <div class="info-box">
                    <div class="info-label">Repeti√ß√µes</div>
                    <div class="info-valor-small" id="repeticoesDisplay">0 / 0</div>
                </div>
            </div>

            <div class="indicador-fase" id="indicadorFase"></div>

            <div class="controles">
                <button class="btn btn-warning" id="btnPausar" onclick="pausarTreino()">
                    PAUSAR
                </button>
                <button class="btn btn-danger" onclick="finalizarTreino()">
                    FINALIZAR
                </button>
            </div>

            <div class="info-extra" id="infoExtra"></div>
        </div>
    </div>

    <!-- Modal de Permiss√µes -->
    <div id="permissionModal" class="modal">
        <div class="modal-content">
            <h3>‚ö° Configura√ß√£o Importante</h3>
            
            <!-- Seletor de Voz -->
            <div style="background: #f0f0f0; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <label style="display: block; font-weight: bold; color: #333; margin-bottom: 10px;">
                    üé§ Escolha a voz do assistente:
                </label>
                <select id="seletorVoz" onchange="atualizarVoz(); sincronizarSeletores();" style="width: 100%; padding: 12px; font-size: 16px; border-radius: 8px; border: 2px solid #667eea; background: white;">
                    <option value="auto">ü§ñ Autom√°tico (Melhor dispon√≠vel)</option>
                    <option value="feminina">üë© Voz Feminina (Maria)</option>
                    <option value="masculina">üë® Voz Masculina (Daniel)</option>
                </select>
                <button class="btn" style="width: 100%; margin-top: 10px; padding: 10px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;" onclick="testarVozSelecionada()">
                    üîä Testar Voz Selecionada
                </button>
            </div>
            
            <p>Para o app funcionar com a tela bloqueada, voc√™ precisa:</p>
            <ul>
                <li>üó£Ô∏è <strong>Voz Sintetizada</strong> - Alertas falados em portugu√™s</li>
                <li>üîä <strong>√Åudio</strong> - Sons de alerta (beeps)</li>
                <li>üì≥ <strong>Vibra√ß√£o</strong> - Alertas t√°teis</li>
                <li>üîî <strong>Notifica√ß√µes</strong> - Alertas na tela bloqueada</li>
                <li>üîí <strong>Tela Ligada</strong> - Mant√©m app ativo</li>
                <li>üìç <strong>Localiza√ß√£o</strong> - Para treino por dist√¢ncia</li>
            </ul>
            <p class="warning-text">‚ö†Ô∏è <strong>IMPORTANTE:</strong> Durante o treino, mantenha o app aberto (pode bloquear a tela). N√£o feche o app nem abra outros aplicativos. Voc√™ ouvir√° "CORRIDA!" e "CAMINHADA!" em voz alta.</p>
            <button class="btn btn-primary" onclick="requestPermissions()">
                üé§ ATIVAR VOZ E PERMITIR
            </button>
            <p style="font-size: 12px; color: #666; margin-top: 10px; text-align: center;">
                Clique no bot√£o acima para ativar a voz sintetizada.<br>
                Voc√™ ouvir√° uma mensagem de confirma√ß√£o.
            </p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

